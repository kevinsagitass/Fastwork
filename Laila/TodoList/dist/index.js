/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ (() => {

eval("const box = document.getElementById(\"todaybox\");\ncheckLocalItem();\nreminder();\n\n// Check Local Storage for Todo if Exists then Proceed to Set the Todos in Backend\nfunction checkLocalItem() {\n  let localTodos = JSON.parse(localStorage.getItem(\"todos\"));\n  if (localTodos != null && localTodos != undefined && localTodos.length > 0) {\n    // Set Todos to Backend\n    setTodos(localTodos);\n  }\n  getTodayList();\n}\n\n// Set Todos in Backend\nfunction setTodos(localTodo) {\n  fetch(`http://localhost:3001/api/set-todo`, {\n    method: \"POST\",\n    headers: {\n      accept: \"*/*\",\n      \"content-type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      localTodo: localTodo\n    })\n  });\n}\n\n// Check if Notification Permission is Granted if Not Request Permission\nif (Notification.permission != \"denied\" && Notification.permission != \"granted\") {\n  Notification.requestPermission().then(permission => {});\n}\n\n// Function to Show Notification\nfunction showNotification(title, message) {\n  new Notification(title, {\n    body: message\n  });\n}\n\n// Get List of Todo that Has Start Date Today\nfunction getTodayList() {\n  fetch(`http://localhost:3001/api/today`).then(response => response.json()).then(data => displayTodos(data));\n  fetch(`http://localhost:3001/api/list?filter=All`).then(response => response.json()).then(data => localStorage.setItem(\"todos\", JSON.stringify(data)));\n}\n\n// Display List of Todos to FrontEnd\nfunction displayTodos(data) {\n  box.innerHTML = \"\";\n  data.forEach(function (value, index) {\n    let items = ``;\n    items += `\n        <li class=\"list-group-item d-flex align-items-center ps-0 pe-3 py-1 rounded-0 border-0 bg-transparent\">\n            <div class=\"form-check\">\n                <input class=\"form-check-input me-0\" type=\"checkbox\" value=\"\" aria-label=\"...\" ${value.status == \"Complete\" ? \"checked\" : \"\"} disabled />\n            </div>\n        </li>\n        <li\n            class=\"list-group-item px-3 py-1 d-flex align-items-center flex-grow-1 border-0 bg-transparent\">\n            <p class=\"lead fw-normal mb-0\">${value.title}</p>\n        </li>`;\n    if (value.status != \"Complete\") {\n      items += `\n            <li class=\"list-group-item rounded-0 border-0 bg-transparent\">\n                <div class=\"text-end text-muted\">\n                    <a href=\"#!\" class=\"text-muted\" data-mdb-toggle=\"tooltip m-auto\" title=\"Start Date\">\n                        <p class=\"small mb-0\"><i class=\"fas fa-info-circle me-2\"></i>${value.date}</p>\n                    </a>\n                </div>\n            </li>\n            <li onClick=\"btnCompleteClick(${value.id})\" class=\"list-group-item p-0 d-flex align-items-center border-0 bg-transparent\">\n              <div class=\"btn btn-primary rounded-3 d-flex align-items-center hidden-sm hidden-xs visible-md-block visible-lg-block\">\n                  <p class=\"small mb-0\">\n                      Complete\n                  </p>\n              </div>\n              <div class=\"hidden-md hidden-lg visible-sm-block visible-xs-block\">\n                <i class=\"fa fa-solid fa-check\"></i>\n              </div>\n            </li>`;\n    } else {\n      items += `\n            <li onClick=\"btnDeleteClick(${value.id})\" class=\"list-group-item p-0 d-flex align-items-center border-0 bg-transparent\">\n              <div class=\"btn btn-danger rounded-3 d-flex align-items-center hidden-sm hidden-xs visible-md-block visible-lg-block\">\n                <p class=\"small mb-0\">\n                    Delete\n                </p>\n              </div>\n              <div class=\"hidden-md hidden-lg visible-sm-block visible-xs-block\">\n                  <i class=\"fa fa-solid fa-trash\"></i>\n              </div>\n            </li>\n            `;\n    }\n    box.innerHTML += `<ul class=\"list-group list-group-horizontal rounded-0\">${items}</ul>`;\n  });\n}\n\n// Delete Todo by ID\nfunction btnDeleteClick(id) {\n  fetch(`http://localhost:3001/api/list/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      accept: \"*/*\",\n      \"content-type\": \"application/json\"\n    }\n  });\n  getTodayList();\n}\n\n// Change Todo Status to Complete\nfunction btnCompleteClick(id) {\n  fetch(`http://localhost:3001/api/list/${id}`, {\n    method: \"PUT\",\n    headers: {\n      accept: \"*/*\",\n      \"content-type\": \"application/json\"\n    }\n  });\n  getTodayList();\n}\n\n// Setup Interval to Check if a Todo is Missed or Will Soon Start\nfunction reminder() {\n  fetch(`http://localhost:3001/api/list?filter=Pending`).then(response => response.json()).then(data => {\n    const today = new Date();\n    data.forEach(function (value, index) {\n      const dates = value.date.split(\" \");\n      if (dates.length > 1) {\n        const date = dates[0].split(\"/\");\n        const time = dates[1].split(\":\");\n        const todoDate = new Date(date[2], date[1] - 1, date[0], time[0], time[1], time[2], 0);\n        const dif = (todoDate.getTime() - today.getTime()) / 1000;\n        if (dif <= 300 && today < todoDate && value.status != \"Complete\") {\n          showNotification(\"Reminder\", `Task Due Date is In 5 Minutes or Less! Please Complete Task ${value.title}`);\n        } else if (dif <= 0 && value.status != \"Complete\") {\n          showNotification(\"Task Missed\", `You Missed Task ${value.title}`);\n        }\n      }\n    });\n  });\n  setInterval(function () {\n    fetch(`http://localhost:3001/api/list?filter=Pending`).then(response => response.json()).then(data => {\n      const today = new Date();\n      data.forEach(function (value, index) {\n        const dates = value.date.split(\" \");\n        if (dates.length > 1) {\n          const date = dates[0].split(\"/\");\n          const time = dates[1].split(\":\");\n          const todoDate = new Date(date[2], date[1] - 1, date[0], time[0], time[1], time[2], 0);\n          const dif = (todoDate.getTime() - today.getTime()) / 1000;\n          if (dif <= 300 && today < todoDate && value.status != \"Complete\") {\n            showNotification(\"Reminder\", `Task Due Date is In 5 Minutes or Less! Please Complete Task ${value.title}`);\n          } else if (dif <= 0 && value.status != \"Complete\") {\n            showNotification(\"Task Missed\", `You Missed Task ${value.title}`);\n          }\n        }\n      });\n    });\n  }, 300000);\n}\nvar div = document.getElementById(\"span\");\n\n// Display Timer in Daily Screen\nfunction time() {\n  var d = new Date();\n  var s = d.getSeconds();\n  var m = d.getMinutes();\n  var h = d.getHours();\n  span.innerHTML = \"\";\n  span.innerHTML += \"Current Time : \" + (\"0\" + h).substr(-2) + \":\" + (\"0\" + m).substr(-2) + \":\" + (\"0\" + s).substr(-2);\n  span.innerHTML += `<a style=\"float: right\" href=\"/calendar\"><i class=\"fa fa-solid fa-calendar\"></i></a>`;\n}\nsetInterval(time, 1000);\nwindow.btnCompleteClick = btnCompleteClick;\nwindow.btnDeleteClick = btnDeleteClick;\n\n//# sourceURL=webpack://backend/./src/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/index.js"]();
/******/ 	
/******/ })()
;