(()=>{const t=document.getElementById("todaybox");function e(t,e){new Notification(t,{body:e})}function n(){fetch("http://localhost:3001/today").then((t=>t.json())).then((e=>function(e){t.innerHTML="",e.forEach((function(e,n){let i="";i+=`\n        <li class="list-group-item d-flex align-items-center ps-0 pe-3 py-1 rounded-0 border-0 bg-transparent">\n            <div class="form-check">\n                <input class="form-check-input me-0" type="checkbox" value="" aria-label="..." ${"Complete"==e.status?"checked":""} disabled />\n            </div>\n        </li>\n        <li\n            class="list-group-item px-3 py-1 d-flex align-items-center flex-grow-1 border-0 bg-transparent">\n            <p class="lead fw-normal mb-0">${e.title}</p>\n        </li>`,"Complete"!=e.status?i+=`\n            <li class="list-group-item rounded-0 border-0 bg-transparent">\n                <div class="text-end text-muted">\n                    <a href="#!" class="text-muted" data-mdb-toggle="tooltip m-auto" title="Start Date">\n                        <p class="small mb-0"><i class="fas fa-info-circle me-2"></i>${e.date}</p>\n                    </a>\n                </div>\n            </li>\n            <li onClick="btnCompleteClick(${e.id})" class="list-group-item p-0 d-flex align-items-center border-0 bg-transparent">\n              <div class="btn btn-primary rounded-3 d-flex align-items-center hidden-sm hidden-xs visible-md-block visible-lg-block">\n                  <p class="small mb-0">\n                      Complete\n                  </p>\n              </div>\n              <div class="hidden-md hidden-lg visible-sm-block visible-xs-block">\n                <i class="fa fa-solid fa-check"></i>\n              </div>\n            </li>`:i+=`\n            <li onClick="btnDeleteClick(${e.id})" class="list-group-item p-0 d-flex align-items-center border-0 bg-transparent">\n              <div class="btn btn-danger rounded-3 d-flex align-items-center hidden-sm hidden-xs visible-md-block visible-lg-block">\n                <p class="small mb-0">\n                    Delete\n                </p>\n              </div>\n              <div class="hidden-md hidden-lg visible-sm-block visible-xs-block">\n                  <i class="fa fa-solid fa-trash"></i>\n              </div>\n            </li>\n            `,t.innerHTML+=`<ul class="list-group list-group-horizontal rounded-0">${i}</ul>`}))}(e))),fetch("http://localhost:3001/list?filter=All").then((t=>t.json())).then((t=>localStorage.setItem("todos",JSON.stringify(t))))}!function(){let t=JSON.parse(localStorage.getItem("todos"));var e;null!=t&&null!=t&&t.length>0&&(e=t,fetch("http://localhost:3001/set-todo",{method:"POST",headers:{accept:"*/*","content-type":"application/json"},body:JSON.stringify({localTodo:e})})),n()}(),fetch("http://localhost:3001/list?filter=Pending").then((t=>t.json())).then((t=>{const n=new Date;t.forEach((function(t,i){const s=t.date.split(" ");if(s.length>1){const i=s[0].split("/"),l=s[1].split(":"),o=new Date(i[2],i[1]-1,i[0],l[0],l[1],l[2],0),a=(o.getTime()-n.getTime())/1e3;a<=300&&n<o&&"Complete"!=t.status?e("Reminder",`Task Due Date is In 5 Minutes or Less! Please Complete Task ${t.title}`):a<=0&&"Complete"!=t.status&&!t.notified&&(e("Task Missed",`You Missed Task ${t.title}`),fetch(`http://localhost:3001/notif/${t.id}`,{method:"PUT",headers:{accept:"*/*","content-type":"application/json"}}))}}))})),setInterval((function(){fetch("http://localhost:3001/list?filter=Pending").then((t=>t.json())).then((t=>{const n=new Date;t.forEach((function(t,i){const s=t.date.split(" ");if(s.length>1){const i=s[0].split("/"),l=s[1].split(":"),o=new Date(i[2],i[1]-1,i[0],l[0],l[1],l[2],0),a=(o.getTime()-n.getTime())/1e3;a<=300&&n<o&&"Complete"!=t.status?e("Reminder",`Task Due Date is In 5 Minutes or Less! Please Complete Task ${t.title}`):a<=0&&"Complete"!=t.status&&!t.notified&&(e("Task Missed",`You Missed Task ${t.title}`),fetch(`http://localhost:3001/notif/${t.id}`,{method:"PUT",headers:{accept:"*/*","content-type":"application/json"}}))}}))}))}),3e5),"denied"!=Notification.permission&&"granted"!=Notification.permission&&Notification.requestPermission().then((t=>{})),document.getElementById("span"),setInterval((function(){var t=new Date,e=t.getSeconds(),n=t.getMinutes(),i=t.getHours();span.innerHTML="",span.innerHTML+="Current Time : "+("0"+i).substr(-2)+":"+("0"+n).substr(-2)+":"+("0"+e).substr(-2),span.innerHTML+='<a style="float: right" href="calendar.html"><i class="fa fa-solid fa-calendar"></i></a>'}),1e3),window.btnCompleteClick=function(t){fetch(`http://localhost:3001/list/${t}`,{method:"PUT",headers:{accept:"*/*","content-type":"application/json"}}),n()},window.btnDeleteClick=function(t){fetch(`http://localhost:3001/list/${t}`,{method:"DELETE",headers:{accept:"*/*","content-type":"application/json"}}),n()}})();